# Quest 1. teacher.sh

## Название файла Go
`teacher.sh`

---

## Условия задания 

| **Instruction (оригинал)**                                                                                                                                 | **Перевод**                                                                                                                        |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| *"I need this report!"*                                                                                                                                    | *«Мне нужен этот отчёт!»*                                                                                                          |
| *"A true teacher does not jealously guard his mastery."*                                                                                                   | *«Истинный учитель не скрывает своё мастерство.»*                                                                                  |
| The commissioner was impressed and asked you to create a training program.                                                                                 | Комиссар впечатлён и просит создать тренировочную программу.                                                                       |
| In a training folder, multiple mystery folders exist with slight data differences.                                                                         | В папке тренинга есть несколько mystery-папок, немного отличающихся данными.                                                       |
| You must write a **teacher.sh** file that…                                                                                                                 | Нужно написать файл **teacher.sh**, который делает следующее:                                                                      |
| **Step 1:** isolate into an env variable **only the number** of the key interview that solved the mystery. Command to find it is the same for all folders. | **Шаг 1:** сохранить в переменную окружения **только номер** ключевого интервью. Команда должна работать одинаково во всех папках. |
| **Step 2:** print that env variable.                                                                                                                       | **Шаг 2:** вывести эту переменную.                                                                                                 |
| **Step 3:** print what the interview contains.                                                                                                             | **Шаг 3:** вывести содержимое файла интервью.                                                                                      |
| **Step 4:** print the content of env variable MAIN_SUSPECT.                                                                                                | **Шаг 4:** вывести содержимое переменной `MAIN_SUSPECT`.                                                                           |
| *Now show them who is the boss…*                                                                                                                           | *Теперь покажи, кто здесь главный…*                                                                                                |

---

## Решение

```go
#!/usr/bin/env bash

KEY_INTERVIEW=$(
  grep -R "SEE INTERVIEW" streets/* \
  | grep -o '[0-9]\+' \
  | head -n1
)

export KEY_INTERVIEW

echo "$KEY_INTERVIEW"

cat interviews/*"$KEY_INTERVIEW"*

echo "$MAIN_SUSPECT"
```

---

## Ключевые понятия

| Элемент                             | Объяснение                                                                          |
| ----------------------------------- | ----------------------------------------------------------------------------------- |
| `#!/usr/bin/env bash`               | Шебанг: указывает, что скрипт нужно выполнять Bash-интерпретатором.                 |
| `grep -R "SEE INTERVIEW" streets/*` | Рекурсивно ищет строку **SEE INTERVIEW** в папке `streets/`.                        |
| `grep -o '[0-9]\+'`                 | Из найденной строки берёт **только число** (номер интервью).                        |
| `head -n1`                          | Берёт **первое найденное** число–совпадение.                                        |
| `KEY_INTERVIEW=$( ... )`            | Выполняет команду в скобках и сохраняет результат в переменную.                     |
| `export KEY_INTERVIEW`              | Экспортирует переменную в окружение, чтобы её могли читать другие процессы/команды. |
| `echo "$KEY_INTERVIEW"`             | Печатает найденный номер интервью.                                                  |
| `cat interviews/*"$KEY_INTERVIEW"*` | Выводит содержание файла интервью, найденного по номеру.                            |
| `echo "$MAIN_SUSPECT"`              | Печатает содержимое переменной окружения MAIN_SUSPECT.                              |

---

## Логика и пошаговый разбор кода

### 1. Поиск ключевого интервью

```go
grep -R "SEE INTERVIEW" streets/*
```
Ищем строки, где упоминается ключевое интервью. В разных mystery-папках названия могут меняться, но путь одинаков, поэтому и команда одинаковая.

### 2. Извлечение номера

```go
grep -o '[0-9]\+'
```
В команде «SEE INTERVIEW XX» нам нужно только число.
[0-9]\+ — регулярка «одна или больше цифр».

### 3. Выбор первого результата

```go
head -n1
```
Если по ошибке будет несколько совпадений, берём только первое.

### 4. Сохранение в переменную
```go
KEY_INTERVIEW=$( ... )
```
Команда внутри $() выполняется, а результат становится значением KEY_INTERVIEW.

### 5. Экспорт переменной
```go
export KEY_INTERVIEW
```
Делаем переменную доступной для последующих команд.

### 6. Печатаем номер
```go
echo "$KEY_INTERVIEW"
```
Показывает найденный номер интервью.

### 7. Печатаем содержание файла интервью
```go
cat interviews/*"$KEY_INTERVIEW"*
```
Ищется файл, содержащий номер, например interview3, 3.txt, interview_03.txt.

### 8. Выводим имя главного подозреваемого
```go
echo "$MAIN_SUSPECT"
```
Печатаем содержимое глобальной переменной, которую предоставляют mystery-папки.

---

## Глоссарий

| Термин                             | Значение                                               |
| ---------------------------------- | ------------------------------------------------------ |
| **grep**                           | Утилита поиска текста в файлах.                        |
| **Регулярное выражение**           | Способ описать шаблон поиска (например, цифры).        |
| **Переменная окружения**           | Переменная, доступная текущему процессу и дочерним.    |
| **export**                         | Делает переменную окружения доступной другим командам. |
| **cat**                            | Печатает содержимое файла.                             |
| **Шебанг** (`#!/usr/bin/env bash`) | Указывает оболочку для запуска скрипта.                |

---

## Заключение
1. Скрипт автоматически находит номер ключевого интервью.
2. Сохраняет его в переменную окружения и выводит.
3. Показывает само интервью.
4. Затем выводит имя главного подозреваемого из MAIN_SUSPECT.
5. Это упрощает проверку всех mystery-папок и делает работу учителя быстрой и автоматизированной.
